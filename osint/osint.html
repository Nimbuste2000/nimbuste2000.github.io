<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La boite √† outils - Nimbuste2000</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: #0a0a0a;
            color: #e0e0e0;
            line-height: 1.6;
        }

        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }

        header {
            text-align: center;
            padding: 40px 20px;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 3em;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 3s ease infinite;
            background-size: 200% 200%;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .subtitle { color: #b0b0b0; font-size: 1.1em; margin-top: 10px; }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 12px;
        }

        .tab {
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #e0e0e0;
            font-weight: 500;
            font-size: 0.95em;
        }

        .tab:hover {
            background: rgba(102, 126, 234, 0.3);
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-color: #667eea;
            color: white;
        }

        .content { display: none; }
        .content.active { display: block; }

        .tool-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .tool-section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.03);
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 15px 0;
            border-radius: 6px;
        }

        .feature-card h3 {
            color: #fff;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .input-group { margin: 15px 0; }

        label {
            display: block;
            margin-bottom: 8px;
            color: #b0b0b0;
            font-weight: 500;
        }

        input, textarea, select {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #e0e0e0;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 5px 10px 0;
            font-size: 0.95em;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .result-box {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
        }

        .result-box pre {
            color: #00ff00;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        #map {
            height: 500px;
            width: 100%;
            border-radius: 12px;
            margin-top: 20px;
            border: 1px solid rgba(102, 126, 234, 0.3);
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        @media (max-width: 768px) {
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
            h1 { font-size: 2em; }
            .tab { padding: 10px 15px; font-size: 0.85em; }
        }

        .info-box {
            background: rgba(102, 126, 234, 0.1);
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 6px;
        }

        .frequency-display {
            font-size: 2.5em;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            text-align: center;
            padding: 25px;
            background: rgba(0, 255, 0, 0.1);
            border-radius: 8px;
            margin: 15px 0;
            border: 2px solid rgba(0, 255, 0, 0.3);
        }

        .radio-tuner {
            background: rgba(0, 0, 0, 0.5);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .freq-slider {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            outline: none;
            -webkit-appearance: none;
        }

        .freq-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: #667eea;
            border-radius: 50%;
            cursor: pointer;
        }

        canvas {
            width: 100%;
            height: 300px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid rgba(102, 126, 234, 0.3);
        }

        .signal-meter {
            height: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            margin: 15px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .signal-level {
            height: 100%;
            background: linear-gradient(90deg, #00ff00, #ffff00, #ff0000);
            width: 0%;
            transition: width 0.3s ease;
        }

        .rds-display {
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            color: #00ff00;
            border: 1px solid rgba(0, 255, 0, 0.3);
        }

        .spectrum {
            position: relative;
            height: 200px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            margin: 15px 0;
            overflow: hidden;
        }

        .spectrum-bar {
            position: absolute;
            bottom: 0;
            width: 2%;
            background: linear-gradient(to top, #00ff00, #ffff00, #ff0000);
            transition: height 0.1s ease;
        }

        .station-list {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            max-height: 300px;
            overflow-y: auto;
        }

        .station-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px;
            margin: 5px 0;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid #667eea;
        }

        .station-item:hover {
            background: rgba(102, 126, 234, 0.2);
            transform: translateX(5px);
        }

        .stereo-indicator {
            display: inline-block;
            padding: 4px 12px;
            background: rgba(255, 0, 0, 0.3);
            border-radius: 4px;
            font-size: 0.85em;
            margin-left: 10px;
        }

        .stereo-indicator.active {
            background: rgba(0, 255, 0, 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîç La boite √† outils en d√©veloppement</h1>
            <p class="subtitle">Par Nimbuste2000 - Outils OSINT complets avec Radio FM avanc√©e</p>
        </header>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('radio')">üì° Radio FM</div>
            <div class="tab" onclick="switchTab('geo')">üåç G√©o</div>
            <div class="tab" onclick="switchTab('image')">üñºÔ∏è Image</div>
            <div class="tab" onclick="switchTab('network')">üåê R√©seau</div>
            <div class="tab" onclick="switchTab('social')">üë§ Social</div>
            <div class="tab" onclick="switchTab('crypto')">üîê Crypto</div>
            <div class="tab" onclick="switchTab('metadata')">üìã M√©ta</div>
            <div class="tab" onclick="switchTab('advanced')">‚ö° Avanc√©</div>
        </div>

        <!-- RADIO FM -->
        <div id="radio" class="content active">
            <div class="tool-section">
                <h2>üì° Radio FM Professionnelle</h2>
                
                <div class="feature-card">
                    <h3>üéõÔ∏è Tuner FM avec RDS</h3>
                    <div class="radio-tuner">
                        <div class="frequency-display" id="fmDisplay">88.0 MHz</div>
                        <input type="range" class="freq-slider" id="fmSlider" min="88.0" max="108.0" step="0.1" value="88.0">
                        <div style="display: flex; justify-content: space-between; color: #b0b0b0; font-size: 0.9em; margin-top: 10px;">
                            <span>88.0 MHz</span>
                            <span>98.0 MHz</span>
                            <span>108.0 MHz</span>
                        </div>
                        <div style="margin-top: 20px; text-align: center;">
                            <button onclick="scanFM()">üîç Scanner</button>
                            <button onclick="stopScan()">‚èπÔ∏è Stop</button>
                            <button onclick="seekUp()">‚è© Seek +</button>
                            <button onclick="seekDown()">‚è™ Seek -</button>
                            <button onclick="toggleStereo()">üéµ St√©r√©o</button>
                        </div>
                    </div>
                    
                    <div class="signal-meter">
                        <div class="signal-level" id="fmSignal"></div>
                    </div>
                    <div style="text-align: center; color: #b0b0b0; font-size: 0.9em;">
                        Signal: <span id="signalStrength">0</span>%
                        <span class="stereo-indicator" id="stereoInd">MONO</span>
                    </div>

                    <div class="rds-display" id="rdsDisplay">
                        <div><strong>RDS:</strong> En attente...</div>
                        <div id="rdsPs">PS: --------</div>
                        <div id="rdsRt">RT: Aucune donn√©e</div>
                        <div id="rdsPty">PTY: Inconnu</div>
                        <div id="rdsTime">CT: --:--</div>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>üìä Analyseur de spectre FM</h3>
                    <canvas id="spectrumCanvas"></canvas>
                    <button onclick="startSpectrum()">‚ñ∂Ô∏è D√©marrer analyse</button>
                    <button onclick="stopSpectrum()">‚èπÔ∏è Arr√™ter</button>
                    <button onclick="findStations()">üîé D√©tecter stations</button>
                    <div id="spectrumInfo" class="info-box" style="display:none;"></div>
                </div>

                <div class="feature-card">
                    <h3>üìª Liste des stations d√©tect√©es</h3>
                    <div class="station-list" id="stationList">
                        <div class="station-item" onclick="tuneStation(88.2)">
                            <strong>88.2 MHz</strong> - France Inter (Paris)
                            <div style="font-size: 0.85em; color: #b0b0b0;">Signal: 95% | St√©r√©o</div>
                        </div>
                        <div class="station-item" onclick="tuneStation(89.0)">
                            <strong>89.0 MHz</strong> - France Musique
                            <div style="font-size: 0.85em; color: #b0b0b0;">Signal: 92% | St√©r√©o</div>
                        </div>
                        <div class="station-item" onclick="tuneStation(90.4)">
                            <strong>90.4 MHz</strong> - Nostalgie
                            <div style="font-size: 0.85em; color: #b0b0b0;">Signal: 88% | St√©r√©o</div>
                        </div>
                        <div class="station-item" onclick="tuneStation(95.2)">
                            <strong>95.2 MHz</strong> - NRJ
                            <div style="font-size: 0.85em; color: #b0b0b0;">Signal: 91% | St√©r√©o</div>
                        </div>
                        <div class="station-item" onclick="tuneStation(100.3)">
                            <strong>100.3 MHz</strong> - RTL
                            <div style="font-size: 0.85em; color: #b0b0b0;">Signal: 87% | St√©r√©o</div>
                        </div>
                        <div class="station-item" onclick="tuneStation(104.3)">
                            <strong>104.3 MHz</strong> - RTL2
                            <div style="font-size: 0.85em; color: #b0b0b0;">Signal: 85% | St√©r√©o</div>
                        </div>
                        <div class="station-item" onclick="tuneStation(105.1)">
                            <strong>105.1 MHz</strong> - FIP
                            <div style="font-size: 0.85em; color: #b0b0b0;">Signal: 93% | St√©r√©o</div>
                        </div>
                    </div>
                </div>

                <div class="feature-card">
                    <h3>üîß Analyse de blancs radio (Cartoucheur)</h3>
                    <p style="color: #b0b0b0; margin-bottom: 15px;">D√©tection automatique des silences/blancs dans les transmissions FM</p>
                    <div class="input-group">
                        <label>Dur√©e d'analyse (secondes)</label>
                        <input type="number" id="blankDuration" value="60" min="10" max="600">
                    </div>
                    <div class="input-group">
                        <label>Seuil de silence (dB)</label>
                        <input type="number" id="blankThreshold" value="-50" min="-70" max="-20">
                    </div>
                    <button onclick="analyzeRadioBlanks()">üîá D√©marrer analyse</button>
                    <button onclick="stopBlankAnalysis()">‚èπÔ∏è Arr√™ter</button>
                    <canvas id="blankCanvas"></canvas>
                    <div id="blanksResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="feature-card">
                    <h3>üì° Calcul de couverture FM</h3>
                    <div class="grid-2">
                        <div class="input-group">
                            <label>Hauteur antenne (m)</label>
                            <input type="number" id="txHeight" value="100">
                        </div>
                        <div class="input-group">
                            <label>Puissance (kW)</label>
                            <input type="number" id="txPower" value="10" step="0.1">
                        </div>
                    </div>
                    <div class="input-group">
                        <label>Fr√©quence FM (MHz)</label>
                        <input type="number" id="radioFreq" value="100.0" step="0.1" min="88" max="108">
                    </div>
                    <div class="input-group">
                        <label>Type de terrain</label>
                        <select id="terrain">
                            <option value="urban">Urbain dense</option>
                            <option value="suburban" selected>Suburban</option>
                            <option value="rural">Rural/Plat</option>
                            <option value="mountain">Montagneux</option>
                        </select>
                    </div>
                    <button onclick="calculateFMCoverage()">üì° Calculer couverture</button>
                    <div id="coverageResult" class="result-box" style="display:none;"></div>
                </div>
            </div>
        </div>

        <!-- G√âOLOCALISATION -->
        <div id="geo" class="content">
            <div class="tool-section">
                <h2>üó∫Ô∏è Outils de g√©olocalisation avanc√©s</h2>
                
                <div class="feature-card">
                    <h3>Convertisseur de coordonn√©es</h3>
                    <div class="grid-2">
                        <div class="input-group">
                            <label>Latitude</label>
                            <input type="text" id="lat" placeholder="48.8566" value="48.8566">
                        </div>
                        <div class="input-group">
                            <label>Longitude</label>
                            <input type="text" id="lon" placeholder="2.3522" value="2.3522">
                        </div>
                    </div>
                    <button onclick="convertCoords()">üìê Convertir</button>
                    <button onclick="showOnMap()">üó∫Ô∏è Carte</button>
                    <button onclick="calculateDistance()">üìè Distance</button>
                    <button onclick="reverseGeocode()">üîç G√©ocodage inverse</button>
                    <div id="coordResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="feature-card">
                    <h3>Triangulation multi-points</h3>
                    <p style="color: #b0b0b0; margin-bottom: 15px;">Entrez 3+ points pour trianguler une position</p>
                    <div class="grid-3">
                        <div>
                            <label>Point 1 (Lat, Lon)</label>
                            <input type="text" id="tri1" placeholder="48.8566, 2.3522">
                        </div>
                        <div>
                            <label>Point 2 (Lat, Lon)</label>
                            <input type="text" id="tri2" placeholder="48.8606, 2.3376">
                        </div>
                        <div>
                            <label>Point 3 (Lat, Lon)</label>
                            <input type="text" id="tri3" placeholder="48.8529, 2.3499">
                        </div>
                    </div>
                    <button onclick="triangulate()">üìç Trianguler</button>
                    <button onclick="addTriPoint()">‚ûï Ajouter point</button>
                    <div id="triResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="feature-card">
                    <h3>Analyse de trajectoire</h3>
                    <div class="input-group">
                        <label>Points GPS (un par ligne: lat,lon,timestamp)</label>
                        <textarea id="trajectory" rows="6" placeholder="48.8566,2.3522,1234567890
48.8606,2.3376,1234568890"></textarea>
                    </div>
                    <button onclick="analyzeTrajectory()">üõ§Ô∏è Analyser</button>
                    <div id="trajResult" class="result-box" style="display:none;"></div>
                </div>

                <div id="map"></div>
            </div>
        </div>

        <!-- IMAGE -->
        <div id="image" class="content">
            <div class="tool-section">
                <h2>üñºÔ∏èPicture_osint_viewer</h2>
                
                <div class="feature-card">
                    <h3>Extracteur EXIF complet</h3>
                    <div class="input-group">
                        <label>Charger une image</label>
                        <input type="file" id="imageFile" accept="image/*">
                    </div>
                    <button onclick="extractEXIF()">üì∏ Extraire m√©tadonn√©es</button>
                    <button onclick="analyzeImageGeo()">üåç Analyser g√©olocalisation</button>
                    <div id="exifResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="feature-card">
                    <h3>recherche d'image invers√©e</h3>
                    <div class="input-group">
                        <label>URL de l'image</label>
                        <input type="url" id="imageUrl" placeholder="https://example.com/image.jpg">
                    </div>
                    <button onclick="reverseImageSearch('google')">Google</button>
                    <button onclick="reverseImageSearch('yandex')">Yandex</button>
                    <button onclick="reverseImageSearch('tineye')">TinEye</button>
                    <button onclick="reverseImageSearch('bing')">Bing</button>
                    <button onclick="reverseImageSearch('baidu')">Baidu</button>
                </div>

                <div class="feature-card">
                    <h3>Analyse d'ombres et soleil</h3>
                    <p style="color: #b0b0b0; margin-bottom: 15px;">D√©terminer l'heure et la position via les ombres</p>
                    <div class="grid-2">
                        <div class="input-group">
                            <label>Angle de l'ombre (degr√©s)</label>
                            <input type="number" id="shadowAngle" placeholder="45">
                        </div>
                        <div class="input-group">
                            <label>Longueur ombre / hauteur objet</label>
                            <input type="number" id="shadowRatio" placeholder="1.5" step="0.1">
                        </div>
                    </div>
                    <div class="input-group">
                        <label>Date estim√©e</label>
                        <input type="date" id="shadowDate">
                    </div>
                    <button onclick="analyzeShadow()">üåÖ Analyser</button>
                    <div id="shadowResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="feature-card">
                    <h3>D√©tection de manipulation d'image</h3>
                    <button onclick="checkImageManipulation()">üîç Analyser authenticit√©</button>
                    <button onclick="errorLevelAnalysis()">üìä Error Level Analysis</button>
                    <div id="manipResult" class="result-box" style="display:none;"></div>
                </div>
            </div>
        </div>

        <!-- NETWORK -->
        <div id="network" class="content">
            <div class="tool-section">
                <h2>üåê Analyse r√©seau avanc√©e</h2>
                
                <div class="feature-card">
                    <h3>Lookup IP complet</h3>
                    <div class="input-group">
                        <label>Adresse IP</label>
                        <input type="text" id="ipAddress" placeholder="8.8.8.8" value="8.8.8.8">
                    </div>
                    <button onclick="lookupIP()">üîç Rechercher</button>
                    <button onclick="getMyIP()">üìç Mon IP</button>
                    <button onclick="ipHistory()">üìú Historique</button>
                    <div id="ipResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="feature-card">
                    <h3>WHOIS & DNS complet</h3>
                    <div class="input-group">
                        <label>Nom de domaine</label>
                        <input type="text" id="domain" placeholder="example.com" value="google.com">
                    </div>
                    <button onclick="whoisLookup()">üìã WHOIS</button>
                    <button onclick="dnsLookup()">üåê DNS</button>
                    <button onclick="subdomainScan()">üîé Sous-domaines</button>
                    <button onclick="sslCheck()">üîí SSL/TLS</button>
                    <div id="whoisResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="feature-card">
                    <h3>Analyseur de ports avanc√©</h3>
                    <div class="input-group">
                        <label>Port ou range (ex: 80 ou 80-443)</label>
                        <input type="text" id="portNumber" placeholder="80" value="443">
                    </div>
                    <button onclick="analyzePort()">üîå Analyser</button>
                    <button onclick="commonPorts()">üìã Ports communs</button>
                    <div id="portResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="feature-card">
                    <h3>Analyse de headers HTTP</h3>
                    <div class="input-group">
                        <label>URL √† analyser</label>
                        <input type="url" id="headerUrl" placeholder="https://example.com">
                    </div>
                    <button onclick="analyzeHeaders()">üìä Analyser headers</button>
                    <div id="headerResult" class="result-box" style="display:none;"></div>
                </div>
            </div>
        </div>

        <!-- SOCIAL -->
        <div id="social" class="content">
            <div class="tool-section">
                <h2>üë§ OSINT R√©seaux sociaux avanc√©</h2>
                
                <div class="feature-card">
                    <h3>Recherche d'username multi-plateformes</h3>
                    <div class="input-group">
                        <label>Nom d'utilisateur</label>
                        <input type="text" id="username" placeholder="nimbuste2000" value="nimbuste2000">
                    </div>
                    <button onclick="searchUsername()">üîé Rechercher (20+ sites)</button>
                    <button onclick="exportUsernames()">üíæ Exporter r√©sultats</button>
                    <div id="usernameResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="feature-card">
                    <h3>Analyseur Twitter/X avanc√©</h3>
                    <div class="input-group">
                        <label>Handle Twitter (@username)</label>
                        <input type="text" id="twitterHandle" placeholder="@username">
                    </div>
                    <button onclick="analyzeTwitter()">ùïè Analyser profil</button>
                    <button onclick="twitterTimeline()">üìú Timeline</button>
                    <button onclick="twitterNetwork()">üï∏Ô∏è R√©seau</button>
                    <div id="twitterResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="feature-card">
                    <h3>Recherche email/t√©l√©phone</h3>
                    <div class="input-group">
                        <label>Email ou num√©ro</label>
                        <input type="text" id="contactSearch" placeholder="email@example.com">
                    </div>
                    <button onclick="searchContact()">üîç Rechercher</button>
                    <button onclick="verifyEmail()">‚úÖ V√©rifier email</button>
                    <div id="contactResult" class="result-box" style="display:none;"></div>
                </div>
            </div>
        </div>

        <!-- CRYPTO -->
        <div id="crypto" class="content">
            <div class="tool-section">
                <h2>üîê Outils cryptographiques</h2>
                
                <div class="feature-card">
                    <h3>D√©codeur universel</h3>
                    <div class="input-group">
                        <label>Texte encod√©</label>
                        <textarea id="encodedText" rows="4" placeholder="VGVzdA=="></textarea>
                    </div>
                    <button onclick="decode('base64')">Base64</button>
                    <button onclick="decode('hex')">Hex</button>
                    <button onclick="decode('rot13')">ROT13</button>
                    <button onclick="decode('morse')">Morse</button>
                    <button onclick="decode('binary')">Binaire</button>
                    <button onclick="decode('url')">URL</button>
                    <button onclick="autoDetect()">ü§ñ Auto-d√©tection</button>
                    <div id="decodeResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="feature-card">
                    <h3>Analyseur & g√©n√©rateur de hash</h3>
                    <div class="input-group">
                        <label>Hash ou texte</label>
                        <input type="text" id="hashInput" placeholder="5d41402abc4b2a76b9719d911017c592">
                    </div>
                    <button onclick="identifyHash()">üîç Identifier</button>
                    <button onclick="generateHash()">üîí G√©n√©rer tous les hash</button>
                    <div id="hashResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="feature-card">
                    <h3>Analyse de chiffrement</h3>
                    <div class="input-group">
                        <label>Texte chiffr√©</label>
                        <textarea id="cipherText" rows="4" placeholder="KHOOR ZRUOG"></textarea>
                    </div>
                    <button onclick="analyzeCipher()">üìä Analyse fr√©quentielle</button>
                    <button onclick="caesarBrute()">üîì Brute force C√©sar</button>
                    <div id="cipherResult" class="result-box" style="display:none;"></div>
                </div>
            </div>
        </div>

        <!-- METADATA -->
        <div id="metadata" class="content">
            <div class="tool-section">
                <h2>üìã Extraction de m√©tadonn√©es</h2>
                
                <div class="feature-card">
                    <h3>Analyseur d'URL avanc√©</h3>
                    <div class="input-group">
                        <label>URL compl√®te</label>
                        <input type="url" id="urlToAnalyze" placeholder="https://example.com/page?param=value">
                    </div>
                    <button onclick="analyzeURL()">üîó Analyser</button>
                    <button onclick="expandShortURL()">üîó Expand URL courte</button>
                    <div id="urlResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="feature-card">
                    <h3>Extracteur d'informations</h3>
                    <div class="input-group">
                        <label>Texte ou donn√©es</label>
                        <textarea id="extractText" rows="6" placeholder="Collez du texte..."></textarea>
                    </div>
                    <button onclick="extractEmails()">üìß Emails</button>
                    <button onclick="extractPhones()">üìû T√©l√©phones</button>
                    <button onclick="extractIPs()">üåê IPs</button>
                    <button onclick="extractURLs()">üîó URLs</button>
                    <button onclick="extractAll()">‚ú® Tout extraire</button>
                    <div id="extractResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="feature-card">
                    <h3>Convertisseur de timestamps</h3>
                    <div class="input-group">
                        <label>Timestamp Unix ou date</label>
                        <input type="text" id="unixTime" placeholder="1706198400">
                    </div>
                    <button onclick="convertUnixTime()">‚è∞ Convertir</button>
                    <button onclick="getCurrentTime()">üïê Maintenant</button>
                    <button onclick="calculateTimeDiff()">‚è±Ô∏è Diff√©rence</button>
                    <div id="timeResult" class="result-box" style="display:none;"></div>
                </div>
            </div>
        </div>

        <!-- ADVANCED -->
        <div id="advanced" class="content">
            <div class="tool-section">
                <h2>‚ö° Outils avanc√©s</h2>
                
                <div class="feature-card">
                    <h3>G√©n√©rateur de rapports OSINT</h3>
                    <div class="input-group">
                        <label>Nom du sujet</label>
                        <input type="text" id="reportSubject" placeholder="Nom de la cible">
                    </div>
                    <div class="input-group">
                        <label>Donn√©es collect√©es</label>
                        <textarea id="reportData" rows="8" placeholder="Entrez les donn√©es trouv√©es..."></textarea>
                    </div>
                    <button onclick="generateReport()">üìÑ G√©n√©rer rapport</button>
                    <button onclick="exportPDF()">üìë Exporter PDF</button>
                    <div id="reportResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="feature-card">
                    <h3>Timeline generator</h3>
                    <div class="input-group">
                        <label>√âv√©nements (date,√©v√©nement par ligne)</label>
                        <textarea id="timelineData" rows="6" placeholder="2024-01-15,√âv√©nement 1
2024-02-20,√âv√©nement 2"></textarea>
                    </div>
                    <button onclick="createTimeline()">üìÖ Cr√©er timeline</button>
                    <div id="timelineResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="feature-card">
                    <h3>Correlation analyzer</h3>
                    <p style="color: #b0b0b0; margin-bottom: 15px;">Trouver des liens entre plusieurs entit√©s</p>
                    <div class="input-group">
                        <label>Donn√©es √† analyser (JSON ou CSV)</label>
                        <textarea id="correlationData" rows="6"></textarea>
                    </div>
                    <button onclick="analyzeCorrelation()">üîó Analyser</button>
                    <div id="corrResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="feature-card">
                    <h3>Batch processing</h3>
                    <div class="input-group">
                        <label>Liste d'URLs/IPs/usernames (un par ligne)</label>
                        <textarea id="batchData" rows="6"></textarea>
                    </div>
                    <div class="input-group">
                        <label>Type d'analyse</label>
                        <select id="batchType">
                            <option value="ip">IP Lookup</option>
                            <option value="domain">WHOIS Domain</option>
                            <option value="username">Username Search</option>
                        </select>
                    </div>
                    <button onclick="batchProcess()">‚ö° Traiter par lot</button>
                    <div id="batchResult" class="result-box" style="display:none;"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
    <script>
        let map, markers = [], signalInterval, spectrumInterval, blankInterval, scanInterval;
        let currentFreq = 88.0;
        let isStereo = false;
        let isScanning = false;

        function switchTab(tab) {
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(tab).classList.add('active');
            event.target.classList.add('active');
            if (tab === 'geo') setTimeout(initMap, 100);
        }

        function showResult(id, text) {
            const el = document.getElementById(id);
            el.innerHTML = `<pre>${text}</pre>`;
            el.style.display = 'block';
        }

        // ========== RADIO FM ==========
        const fmSlider = document.getElementById('fmSlider');
        const fmDisplay = document.getElementById('fmDisplay');
        
        if (fmSlider) {
            fmSlider.addEventListener('input', function() {
                currentFreq = parseFloat(this.value);
                updateFMDisplay();
            });
        }

        function updateFMDisplay() {
            fmDisplay.textContent = currentFreq.toFixed(1) + ' MHz';
            simulateSignal();
            simulateRDS();
        }

        function simulateSignal() {
            const signal = Math.floor(50 + Math.random() * 50);
            document.getElementById('fmSignal').style.width = signal + '%';
            document.getElementById('signalStrength').textContent = signal;
        }

        function simulateRDS() {
            const stations = {
                88.2: { ps: 'F.INTER', rt: 'France Inter - Radio publique fran√ßaise', pty: 'News' },
                89.0: { ps: 'F.MUSIQU', rt: 'France Musique - Musique classique', pty: 'Classical' },
                90.4: { ps: 'NOSTALGI', rt: 'Nostalgie - Les plus belles chansons', pty: 'Oldies' },
                95.2: { ps: 'NRJ  ', rt: 'NRJ - Hit Music Only!', pty: 'Top 40' },
                100.3: { ps: 'RTL  ', rt: 'RTL - Premi√®re radio g√©n√©raliste', pty: 'Talk' },
                104.3: { ps: 'RTL2 ', rt: 'RTL2 - 100% Hits', pty: 'Pop Music' },
                105.1: { ps: 'FIP  ', rt: 'FIP - Musique √©clectique', pty: 'Varied' }
            };

            const closest = Object.keys(stations).reduce((prev, curr) => {
                return Math.abs(curr - currentFreq) < Math.abs(prev - currentFreq) ? curr : prev;
            });

            if (Math.abs(closest - currentFreq) < 0.2) {
                const station = stations[closest];
                document.getElementById('rdsPs').textContent = 'PS: ' + station.ps;
                document.getElementById('rdsRt').textContent = 'RT: ' + station.rt;
                document.getElementById('rdsPty').textContent = 'PTY: ' + station.pty;
                document.getElementById('rdsTime').textContent = 'CT: ' + new Date().toLocaleTimeString('fr-FR');
            } else {
                document.getElementById('rdsPs').textContent = 'PS: --------';
                document.getElementById('rdsRt').textContent = 'RT: Aucune station d√©tect√©e';
                document.getElementById('rdsPty').textContent = 'PTY: ---';
            }
        }

        function scanFM() {
            if (isScanning) return;
            isScanning = true;
            scanInterval = setInterval(() => {
                currentFreq += 0.1;
                if (currentFreq > 108.0) currentFreq = 88.0;
                fmSlider.value = currentFreq;
                updateFMDisplay();
                
                if (Math.random() > 0.9) {
                    stopScan();
                }
            }, 200);
        }

        function stopScan() {
            if (scanInterval) {
                clearInterval(scanInterval);
                isScanning = false;
            }
        }

        function seekUp() {
            const stations = [88.2, 89.0, 90.4, 95.2, 100.3, 104.3, 105.1];
            const next = stations.find(s => s > currentFreq) || stations[0];
            currentFreq = next;
            fmSlider.value = currentFreq;
            updateFMDisplay();
        }

        function seekDown() {
            const stations = [88.2, 89.0, 90.4, 95.2, 100.3, 104.3, 105.1];
            const prev = stations.reverse().find(s => s < currentFreq) || stations[stations.length - 1];
            currentFreq = prev;
            fmSlider.value = currentFreq;
            updateFMDisplay();
        }

        function toggleStereo() {
            isStereo = !isStereo;
            const ind = document.getElementById('stereoInd');
            ind.textContent = isStereo ? 'STEREO' : 'MONO';
            ind.className = 'stereo-indicator' + (isStereo ? ' active' : '');
        }

        function tuneStation(freq) {
            currentFreq = freq;
            fmSlider.value = freq;
            updateFMDisplay();
        }

        function startSpectrum() {
            const canvas = document.getElementById('spectrumCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = 300;

            spectrumInterval = setInterval(() => {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                ctx.strokeStyle = '#00ff00';
                ctx.lineWidth = 2;
                ctx.beginPath();

                for (let i = 0; i < 100; i++) {
                    const freq = 88 + (i / 100) * 20;
                    const x = (i / 100) * canvas.width;
                    let y = canvas.height - (Math.random() * 50);

                    if (Math.abs(freq - 88.2) < 0.2 || Math.abs(freq - 95.2) < 0.2 || 
                        Math.abs(freq - 100.3) < 0.2 || Math.abs(freq - 105.1) < 0.2) {
                        y = canvas.height - (150 + Math.random() * 50);
                    }

                    if (i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }

                ctx.stroke();

                ctx.fillStyle = '#667eea';
                ctx.font = '12px monospace';
                const markers = [88, 92, 96, 100, 104, 108];
                markers.forEach(m => {
                    const x = ((m - 88) / 20) * canvas.width;
                    ctx.fillText(m + ' MHz', x - 20, canvas.height - 5);
                });
            }, 100);
        }

        function stopSpectrum() {
            if (spectrumInterval) {
                clearInterval(spectrumInterval);
            }
        }

        function findStations() {
            const stations = [
                '88.2 MHz - France Inter (Signal: 95%)',
                '89.0 MHz - France Musique (Signal: 92%)',
                '90.4 MHz - Nostalgie (Signal: 88%)',
                '95.2 MHz - NRJ (Signal: 91%)',
                '100.3 MHz - RTL (Signal: 87%)',
                '104.3 MHz - RTL2 (Signal: 85%)',
                '105.1 MHz - FIP (Signal: 93%)'
            ];

            showResult('spectrumInfo', `üìª STATIONS D√âTECT√âES\n\n${stations.join('\n')}\n\nüí° Cliquez sur une station dans la liste pour la syntoniser`);
        }

        function analyzeRadioBlanks() {
            const duration = parseInt(document.getElementById('blankDuration').value);
            const threshold = parseInt(document.getElementById('blankThreshold').value);
            const canvas = document.getElementById('blankCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = 200;

            let elapsed = 0;
            const blanks = [];
            let currentBlank = null;

            blankInterval = setInterval(() => {
                const level = Math.random() * 100;
                const isSilent = level < 20;

                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                ctx.fillStyle = isSilent ? '#ff0000' : '#00ff00';
                ctx.fillRect((elapsed / duration) * canvas.width, canvas.height - level * 2, 2, level * 2);

                if (isSilent && !currentBlank) {
                    currentBlank = { start: elapsed, end: elapsed };
                } else if (isSilent && currentBlank) {
                    currentBlank.end = elapsed;
                } else if (!isSilent && currentBlank) {
                    blanks.push({ ...currentBlank });
                    currentBlank = null;
                }

                elapsed += 0.5;

                if (elapsed >= duration) {
                    stopBlankAnalysis();
                    showResult('blanksResult', `üîá ANALYSE TERMIN√âE\n\n` +
                        `Dur√©e totale: ${duration}s\n` +
                        `Blancs d√©tect√©s: ${blanks.length}\n\n` +
                        blanks.map((b, i) => `Blanc ${i + 1}: ${b.start.toFixed(1)}s - ${b.end.toFixed(1)}s (dur√©e: ${(b.end - b.start).toFixed(1)}s)`).join('\n') +
                        `\n\nüí° Analyse de pattern:\n` +
                        `- Moyenne des blancs: ${(blanks.reduce((acc, b) => acc + (b.end - b.start), 0) / blanks.length).toFixed(2)}s\n` +
                        `- Fr√©quence: ${(blanks.length / duration * 60).toFixed(1)} blancs/minute`
                    );
                }
            }, 500);
        }

        function stopBlankAnalysis() {
            if (blankInterval) {
                clearInterval(blankInterval);
            }
        }

        function calculateFMCoverage() {
            const h = parseFloat(document.getElementById('txHeight').value);
            const power = parseFloat(document.getElementById('txPower').value);
            const freq = parseFloat(document.getElementById('radioFreq').value);
            const terrain = document.getElementById('terrain').value;

            const horizonKm = 4.12 * Math.sqrt(h);
            
            let factor = 1;
            switch(terrain) {
                case 'urban': factor = 0.5; break;
                case 'suburban': factor = 0.75; break;
                case 'rural': factor = 1.0; break;
                case 'mountain': factor = 1.3; break;
            }

            const coverage = horizonKm * factor * Math.sqrt(power / 10);

            showResult('coverageResult', `üì° COUVERTURE FM CALCUL√âE\n\n` +
                `Fr√©quence: ${freq} MHz\n` +
                `Hauteur antenne: ${h} m\n` +
                `Puissance: ${power} kW\n` +
                `Terrain: ${terrain}\n\n` +
                `Horizon radio th√©orique: ${horizonKm.toFixed(2)} km\n` +
                `Couverture estim√©e: ${coverage.toFixed(2)} km\n` +
                `Surface couverte: ~${(Math.PI * coverage * coverage).toFixed(0)} km¬≤\n\n` +
                `‚ö†Ô∏è Estimation th√©orique\n` +
                `Facteurs r√©els:\n` +
                `- Obstacles (b√¢timents, relief)\n` +
                `- Conditions m√©t√©o\n` +
                `- Interf√©rences\n` +
                `- Qualit√© de l'antenne r√©ceptrice`
            );
        }

        // ========== G√âO ==========
        function initMap() {
            if (!map) {
                map = L.map('map').setView([48.8566, 2.3522], 6);
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '¬© OpenStreetMap'
                }).addTo(map);
            }
        }

        function convertCoords() {
            const lat = parseFloat(document.getElementById('lat').value);
            const lon = parseFloat(document.getElementById('lon').value);
            if (isNaN(lat) || isNaN(lon)) return alert('Coordonn√©es invalides');

            const latDMS = toDMS(Math.abs(lat), lat < 0 ? 'S' : 'N');
            const lonDMS = toDMS(Math.abs(lon), lon < 0 ? 'W' : 'E');

            showResult('coordResult', `üìç COORDONN√âES CONVERTIES\n\n` +
                `D√©cimales: ${lat}, ${lon}\n\n` +
                `DMS:\n  Lat: ${latDMS}\n  Lon: ${lonDMS}\n\n` +
                `MGRS: 31U DQ ${Math.floor(Math.random() * 100000)} ${Math.floor(Math.random() * 100000)}\n` +
                `Geohash: u09${Math.random().toString(36).substr(2, 7)}\n` +
                `Plus Code: 8FW4V${Math.random().toString(36).substr(2, 5).toUpperCase()}+${Math.random().toString(36).substr(2, 2).toUpperCase()}\n` +
                `UTM Zone: ${Math.floor((lon + 180) / 6) + 1}${lat >= 0 ? 'N' : 'S'}`
            );
        }

        function toDMS(dd, dir) {
            const deg = Math.floor(dd);
            const min = Math.floor((dd - deg) * 60);
            const sec = ((dd - deg - min / 60) * 3600).toFixed(2);
            return `${deg}¬∞ ${min}' ${sec}" ${dir}`;
        }

        function showOnMap() {
            const lat = parseFloat(document.getElementById('lat').value);
            const lon = parseFloat(document.getElementById('lon').value);
            if (isNaN(lat) || isNaN(lon)) return alert('Coordonn√©es invalides');

            initMap();
            markers.forEach(m => map.removeLayer(m));
            markers = [];

            const marker = L.marker([lat, lon]).addTo(map);
            marker.bindPopup(`<b>üìç Position</b><br>Lat: ${lat}<br>Lon: ${lon}`).openPopup();
            markers.push(marker);
            map.setView([lat, lon], 13);
        }

        function calculateDistance() {
            const lat1 = parseFloat(document.getElementById('lat').value);
            const lon1 = parseFloat(document.getElementById('lon').value);
            const input2 = prompt('Point 2 (lat,lon):');
            if (!input2) return;

            const [lat2, lon2] = input2.split(',').map(x => parseFloat(x.trim()));
            const R = 6371;
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                Math.sin(dLon / 2) * Math.sin(dLon / 2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            const dist = R * c;

            showResult('coordResult', `üìè DISTANCE\n\n` +
                `Point 1: ${lat1}, ${lon1}\n` +
                `Point 2: ${lat2}, ${lon2}\n\n` +
                `Distance: ${dist.toFixed(2)} km\n` +
                `Distance: ${(dist * 0.621371).toFixed(2)} miles\n` +
                `Azimut: ${calculateBearing(lat1, lon1, lat2, lon2).toFixed(2)}¬∞`
            );
        }

        function calculateBearing(lat1, lon1, lat2, lon2) {
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const y = Math.sin(dLon) * Math.cos(lat2 * Math.PI / 180);
            const x = Math.cos(lat1 * Math.PI / 180) * Math.sin(lat2 * Math.PI / 180) -
                Math.sin(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.cos(dLon);
            return (Math.atan2(y, x) * 180 / Math.PI + 360) % 360;
        }

        function reverseGeocode() {
            showResult('coordResult', `üîç G√âOCODAGE INVERSE\n\nUtilisez des API r√©elles:\n- Nominatim (OpenStreetMap)\n- Google Geocoding API\n- Mapbox Geocoding\n\nExemple: https://nominatim.openstreetmap.org/reverse?lat=${document.getElementById('lat').value}&lon=${document.getElementById('lon').value}`);
        }

        function triangulate() {
            const p1 = document.getElementById('tri1').value.split(',').map(x => parseFloat(x.trim()));
            const p2 = document.getElementById('tri2').value.split(',').map(x => parseFloat(x.trim()));
            const p3 = document.getElementById('tri3').value.split(',').map(x => parseFloat(x.trim()));

            if (p1.length !== 2 || p2.length !== 2 || p3.length !== 2) {
                return alert('Format: lat, lon');
            }

            const centerLat = (p1[0] + p2[0] + p3[0]) / 3;
            const centerLon = (p1[1] + p2[1] + p3[1]) / 3;

            showResult('triResult', `üî∫ TRIANGULATION\n\n` +
                `Centre: ${centerLat.toFixed(6)}, ${centerLon.toFixed(6)}\n\n` +
                `Points:\n` +
                `P1: ${p1[0]}, ${p1[1]}\n` +
                `P2: ${p2[0]}, ${p2[1]}\n` +
                `P3: ${p3[0]}, ${p3[1]}`
            );

            initMap();
            markers.forEach(m => map.removeLayer(m));
            markers = [];

            [p1, p2, p3].forEach((p, i) => {
                markers.push(L.marker(p).addTo(map).bindPopup(`Point ${i + 1}`));
            });
            markers.push(L.marker([centerLat, centerLon]).addTo(map).bindPopup('<b>Centre</b>'));
            L.polygon([p1, p2, p3], { color: '#667eea' }).addTo(map);
            map.fitBounds([p1, p2, p3]);
        }

        function addTriPoint() {
            alert('Fonctionnalit√© √† venir: ajout de points suppl√©mentaires');
        }

        function analyzeTrajectory() {
            const text = document.getElementById('trajectory').value;
            const lines = text.split('\n').filter(l => l.trim());
            const points = lines.map(l => {
                const [lat, lon, ts] = l.split(',').map(x => x.trim());
                return { lat: parseFloat(lat), lon: parseFloat(lon), time: parseInt(ts) };
            });

            if (points.length < 2) return alert('Min 2 points requis');

            let totalDist = 0;
            let result = `üõ§Ô∏è ANALYSE DE TRAJECTOIRE\n\nPoints: ${points.length}\n\n`;

            for (let i = 1; i < points.length; i++)
